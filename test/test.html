<!doctype html>
<head>
    <!-- <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta http-equiv='Content-Type' content='text/html; charset=utf-8' />
    <?php  $http_host = isset($_SERVER['HTTP_HOST']) ? $_SERVER['HTTP_HOST'] : '';
    $REQUEST_URI = isset($_SERVER["REQUEST_URI"]) ? $_SERVER["REQUEST_URI"] : '';
    $current_url = "http://".$http_host.$REQUEST_URI;
    $m_url=str_replace('www.maiyizhi.cn','m.maiyizhi.cn/#',$current_url); ?>
    <meta http-equiv="mobile-agent" content="format=html5; url=<?php echo $m_url; ?>">
    <title><?php echo CHtml::encode($this->pageTitle); ?></title>
    <meta name="renderer" content="webkit">
    <meta http-equiv="Cache-Control" content="no-siteapp"/> -->
    <!-- <link rel="stylesheet" href="http://cdn.amazeui.org/amazeui/2.7.2/css/amazeui.min.css"> -->
    <!-- <link rel="stylesheet" href="<?php echo Yii::app()->request->baseUrl; ?>/css/www.css?20171439"> -->
    <!-- <link rel="stylesheet" href="../../../../../css/animate.css"> -->
    <!-- <meta name="mobile-web-app-capable" content="yes">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no">
    <link rel="icon" sizes="144x144" href="https://icons.maiyizhi.cn/jianxiangce_icon.jpg"> -->
    <!-- <style media="screen">
    html {
      margin: 0;
      padding: 0;
      background-color: #1E1C26;
    }

    body,
    html {
      width: 100%;
      height: 100%;
      overflow: hidden;
      background-color: #000;
    }

    #svgContainer {
      max-width: 100%;
      max-height: 100%;
      background-color: #1E1C26;
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      margin: auto;
    }
    </style> -->
</head>
<body>
  <!-- <div id="shareButton">
    <button style="position:fixed;bottom:25px;left:50%;transform:translateX(-50%);width:50%;height:7%;color:#fff;font-size:18px;border-radius:10px;border-color:#13ae11;background-color:rgba(19,174,17,0.9);z-index:10;">分享</button>
  </div> -->
  <!-- <a style="display:none" id="download" download="clock.webm">Download WebM</a> -->
  <!-- <script type="text/javascript" src="https://threejs.org/build/three.min.js"></script>
  <script type="text/javascript" src="https://res.wx.qq.com/open/js/jweixin-1.3.2.js"></script> -->
  <!-- <div id="svgContainer"></div> -->
  <!-- <canvas id="canvas" width="1416" height="1422" style="width: 100%; height: 100%; transform-origin: 0px 0px 0px;"></canvas> -->
  <!-- <a style="display:none" id="download" download="clock.webm">Download WebM</a>
  <script type="text/javascript" src="./whammy.js"></script>
  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/bodymovin/5.4.2/lottie.min.js"></script> -->
  <!-- <script>
  var counter = 0;
  var video = new Whammy.Video(15);
  var svgContainer = document.getElementById('svgContainer');
  // var canvas = document.getElementById('canvas');
  // var canvas = document.getElementsByTagName('canvas');
  // console.log("canvas",canvas);
  // var context = canvas.getContext('2d');
  var animItem = bodymovin.loadAnimation({
    wrapper: svgContainer,
    animType: 'canvas',
    loop: true,
    path: 'https://labs.nearpod.com/bodymovin/demo/markus/isometric/markus2.json',
    // rendererSettings: {
    //   context: context, // the canvas context
    //   scaleMode: 'noScale',
    //   clearCanvas: true,
    //   progressiveLoad: false, // Boolean, only svg renderer, loads dom elements when needed. Might speed up initialization for large number of elements.
    //   hideOnTransparent: true, //Boolean, only svg renderer, hides elements when opacity reaches 0 (defaults to true)
    //   className: 'some-css-class-name'
    // }
  });
  console.log("animItem",animItem);
  // animItem.addEventListener('DOMLoaded', function (res) {
  //   console.log("DOMLoaded",res);
  //   var canvas = document.getElementsByTagName('canvas');
  // })
  animItem.addEventListener('enterFrame', function (res) {
    console.log("enterFrame",res);
    var imgData = animItem.container.toDataURL("image/webp");
    console.log("imgData",imgData);
    video.add(imgData);
  })
  animItem.addEventListener('loopComplete', function (res) {
    console.log("loopComplete",res);
    counter++
    if (counter > 4) {
      video.compile(false, function(output){
        // var end_time = +new Date;
        var url = window.URL.createObjectURL(output);
        console.log("url",url);
        document.getElementById('download').style.display = '';
        document.getElementById('download').href = url;
        animItem.stop();
        // wx.miniProgram.navigateTo({url: '/pages/changjing/share/share?src='+url});
      });
    }
  })
    // var camera, scene, renderer;
    // var mesh;
    // init();
    // animate();
    // function init() {
    //   camera = new THREE.PerspectiveCamera( 70, window.innerWidth / window.innerHeight, 1, 1000 );
    //   camera.position.z = 400;
    //   scene = new THREE.Scene();
    //   var texture = new THREE.TextureLoader().load( 'http://pics.maiyizhi.cn/jiaoshijiekuaile_bg.png' );
    //   var geometry = new THREE.BoxBufferGeometry( 200, 200, 200 );
    //   var material = new THREE.MeshBasicMaterial( { map: texture,preserveDrawingBuffer: true } );
    //   mesh = new THREE.Mesh( geometry, material );
    //   scene.add( mesh );
    //   renderer = new THREE.WebGLRenderer( { antialias: true } );
    //   renderer.setPixelRatio( window.devicePixelRatio );
    //   renderer.setSize( window.innerWidth, window.innerHeight );
    //   document.body.appendChild( renderer.domElement );
    //   //
    //   window.addEventListener( 'resize', onWindowResize, false );
    // }
    // function onWindowResize() {
    //   camera.aspect = window.innerWidth / window.innerHeight;
    //   camera.updateProjectionMatrix();
    //   renderer.setSize( window.innerWidth, window.innerHeight );
    // }
    // function animate() {
    //   // var imgData = renderer.domElement.toDataURL("image/webp");
    //   // video.add(imgData);
    //   requestAnimationFrame( animate );
    //   mesh.rotation.x += 0.005;
    //   mesh.rotation.y += 0.01;
    //   renderer.render( scene, camera );
    // }
    //
    // document.getElementById('shareButton').addEventListener('click', function () {
    //   // wx.miniProgram.postMessage({ data: {share: 1} });
    //   video.compile(false, function(output){
    //     // var end_time = +new Date;
    //     var url = window.URL.createObjectURL(output);
    //     console.log("url",url);
    //     // document.getElementById('download').style.display = '';
    //     // document.getElementById('download').href = url;
    //     wx.miniProgram.navigateTo({url: '/pages/changjing/share/share?src='+url});
    //   });
    // })
  </script> -->
</body>
